import{a as C,ga as v,ia as L,qa as m,ra as a,sa as l,ta as r,ua as O,v as _}from"./chunk-OA6A5JPO.js";import{Fa as f,Ib as b,N as h,Na as u,T as i,Z as c,a as n,ba as d,da as y,ma as p,ra as S,xb as g}from"./chunk-TL7PNEXL.js";var T=(()=>{class o extends r{name="common";static \u0275fac=(()=>{let e;return function(s){return(e||(e=d(o)))(s||o)}})();static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),B=(()=>{class o{document=i(C);platformId=i(S);el=i(p);injector=i(y);cd=i(b);renderer=i(f);config=i(O);baseComponentStyle=i(T);baseStyle=i(r);scopedStyleEl;rootEl;dt;get styleOptions(){return{nonce:this.config?.csp().nonce}}get _name(){return this.constructor.name.replace(/^_/,"").toLowerCase()}get componentStyle(){return this._componentStyle}attrSelector=L("pc");themeChangeListeners=[];_getHostInstance(e){if(e)return e?this.hostName?e.name===this.hostName?e:this._getHostInstance(e.parentInstance):e.parentInstance:void 0}_getOptionValue(e,t="",s={}){return v(e,t,s)}ngOnInit(){this.document&&this._loadStyles()}ngAfterViewInit(){this.rootEl=this.el?.nativeElement,this.rootEl&&this.rootEl?.setAttribute(this.attrSelector,"")}ngOnChanges(e){if(this.document&&!_(this.platformId)){let{dt:t}=e;t&&t.currentValue&&(this._loadScopedThemeStyles(t.currentValue),this._themeChangeListener(()=>this._loadScopedThemeStyles(t.currentValue)))}}ngOnDestroy(){this._unloadScopedThemeStyles(),this.themeChangeListeners.forEach(e=>m.off("theme:change",e))}_loadStyles(){let e=()=>{l.isStyleNameLoaded("base")||(this.baseStyle.loadGlobalCSS(this.styleOptions),l.setLoadedStyleName("base")),this._loadThemeStyles()};e(),this._themeChangeListener(()=>e())}_loadCoreStyles(){!l.isStyleNameLoaded("base")&&this._name&&(this.baseComponentStyle.loadCSS(this.styleOptions),this.componentStyle&&this.componentStyle?.loadCSS(this.styleOptions),l.setLoadedStyleName(this.componentStyle?.name))}_loadThemeStyles(){if(!a.isStyleNameLoaded("common")){let{primitive:e,semantic:t,global:s,style:I}=this.componentStyle?.getCommonTheme?.()||{};this.baseStyle.load(e?.css,n({name:"primitive-variables"},this.styleOptions)),this.baseStyle.load(t?.css,n({name:"semantic-variables"},this.styleOptions)),this.baseStyle.load(s?.css,n({name:"global-variables"},this.styleOptions)),this.baseStyle.loadGlobalTheme(n({name:"global-style"},this.styleOptions),I),a.setLoadedStyleName("common")}if(!a.isStyleNameLoaded(this.componentStyle?.name)&&this.componentStyle?.name){let{css:e,style:t}=this.componentStyle?.getComponentTheme?.()||{};this.componentStyle?.load(e,n({name:`${this.componentStyle?.name}-variables`},this.styleOptions)),this.componentStyle?.loadTheme(n({name:`${this.componentStyle?.name}-style`},this.styleOptions),t),a.setLoadedStyleName(this.componentStyle?.name)}if(!a.isStyleNameLoaded("layer-order")){let e=this.componentStyle?.getLayerOrderThemeCSS?.();this.baseStyle.load(e,n({name:"layer-order",first:!0},this.styleOptions)),a.setLoadedStyleName("layer-order")}this.dt&&(this._loadScopedThemeStyles(this.dt),this._themeChangeListener(()=>this._loadScopedThemeStyles(this.dt)))}_loadScopedThemeStyles(e){let{css:t}=this.componentStyle?.getPresetTheme?.(e,`[${this.attrSelector}]`)||{},s=this.componentStyle?.load(t,n({name:`${this.attrSelector}-${this.componentStyle?.name}`},this.styleOptions));this.scopedStyleEl=s?.el}_unloadScopedThemeStyles(){this.scopedStyleEl?.remove()}_themeChangeListener(e=()=>{}){l.clearLoadedStyleNames(),m.on("theme:change",e),this.themeChangeListeners.push(e)}cx(e,t){let s=this.parent?this.parent.componentStyle?.classes?.[e]:this.componentStyle?.classes?.[e];return typeof s=="function"?s({instance:this}):typeof s=="string"?s:e}sx(e){let t=this.componentStyle?.inlineStyles?.[e];return typeof t=="function"?t({instance:this}):typeof t=="string"?t:n({},t)}get parent(){return this.parentInstance}static \u0275fac=function(t){return new(t||o)};static \u0275dir=u({type:o,inputs:{dt:"dt"},features:[g([T,r]),c]})}return o})();export{B as a};
