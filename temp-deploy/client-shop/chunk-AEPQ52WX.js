import{f as u}from"./chunk-ETDI7QMC.js";import{N as i,Pb as n,S as o,d as r,na as a}from"./chunk-TL7PNEXL.js";var g=(()=>{class t{router;_currentUser=a(null);_isLoading=a(!1);currentUser=this._currentUser.asReadonly();isLoading=this._isLoading.asReadonly();isAuthenticated=n(()=>!!this._currentUser());constructor(e){this.router=e,this.checkExistingAuth()}checkExistingAuth(){let e=localStorage.getItem("authUser");if(e)try{let s=JSON.parse(e);this._currentUser.set(s)}catch{localStorage.removeItem("authUser")}}login(e){return r(this,null,function*(){this._isLoading.set(!0);try{if(yield new Promise(s=>setTimeout(s,1e3)),e.password==="password"||e.email==="admin@sgats.com"&&e.password==="admin123"||e.email==="user@sgats.com"&&e.password==="user123"){let s={id:1,email:e.email,name:e.email.split("@")[0]};return this._currentUser.set(s),localStorage.setItem("authUser",JSON.stringify(s)),this._isLoading.set(!1),{success:!0}}else return this._isLoading.set(!1),{success:!1,error:"Invalid email or password"}}catch{return this._isLoading.set(!1),{success:!1,error:"Login failed. Please try again."}}})}logout(){this._currentUser.set(null),localStorage.removeItem("authUser"),this.router.navigate(["/dashboard"])}requestPasswordReset(e){return r(this,null,function*(){return yield new Promise(s=>setTimeout(s,500)),{success:!0,message:"Password reset instructions have been sent to your email."}})}requestAccess(e,s){return r(this,null,function*(){return yield new Promise(c=>setTimeout(c,500)),{success:!0,message:"Your access request has been submitted and is under review."}})}static \u0275fac=function(s){return new(s||t)(o(u))};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{g as a};
